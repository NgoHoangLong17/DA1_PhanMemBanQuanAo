USE MASTER 
GO

CREATE DATABASE QUANLYBANQUANAO
GO

USE QUANLYBANQUANAO
GO

CREATE TABLE SANPHAM(
	ID INT IDENTITY(1,1), 
	TEN NVARCHAR(255),
	PRIMARY KEY(ID)
)

GO

CREATE TABLE SIZE(
	ID INT IDENTITY(1,1),
	TEN NVARCHAR(255),
	PRIMARY KEY(ID)
)
GO
CREATE TABLE NSX(
	ID INT IDENTITY(1,1),
	TEN NVARCHAR(255),
	PRIMARY KEY(ID)
)
GO

CREATE TABLE DONGSP(
	ID INT IDENTITY(1,1),
	TEN NVARCHAR(255),
	PRIMARY KEY(ID)
)
GO

CREATE TABLE MAUSAC(
	ID INT IDENTITY(1,1),
	TEN NVARCHAR(255),
	PRIMARY KEY(ID)
)
GO

CREATE TABLE CHATLIEU(
	ID INT IDENTITY(1,1),
	TEN NVARCHAR(255),
	PRIMARY KEY(ID)
)
GO

CREATE TABLE CHITIETSP(
	ID INT IDENTITY(1,1),
	MACTSP NVARCHAR(20) UNIQUE,
	IDSP INT,
	IDDONGSP INT,
	IDMAUSAC INT,
	IDCHATLIEU INT,
	IDSIZE INT,
	IDNSX INT,
	ANH NVARCHAR(255),
	SOLUONGTON INT,
	GIA INT,
	MAVACH INT,
	MOTA NVARCHAR(255),
	PRIMARY KEY(ID),
	FOREIGN KEY(IDSP) REFERENCES SANPHAM(ID),
	FOREIGN KEY(IDDONGSP) REFERENCES DONGSP(ID),
	FOREIGN KEY(IDMAUSAC) REFERENCES MAUSAC(ID),
	FOREIGN KEY(IDCHATLIEU) REFERENCES CHATLIEU(ID),
	FOREIGN KEY(IDSIZE) REFERENCES SIZE(ID),
	FOREIGN KEY(IDNSX) REFERENCES NSX(ID)
)
GO

CREATE TABLE CHUCVU(
	ID INT IDENTITY(1,1),
	TEN NVARCHAR(255),
	PRIMARY KEY(ID)
)
GO

CREATE TABLE NHANVIEN(
	ID INT IDENTITY(1,1),
	MANV NVARCHAR(20) UNIQUE,
	CCCD nvarchar(20) unique,
	TEN NVARCHAR(255),
	IDCHUCVU INT,
	GIOITINH BIT,
	NGAYSINH DATE,
	SDT NVARCHAR(10) UNIQUE NOT NULL,
	DIACHI NVARCHAR(255),
	EMAIL NVARCHAR(255) UNIQUE NOT NULL,
	MATKHAU NVARCHAR(255),
	TRANGTHAI BIT,
	PRIMARY KEY(ID),
	FOREIGN KEY(IDCHUCVU) REFERENCES CHUCVU(ID)
)
GO

CREATE TABLE KHUYENMAI(
	ID INT IDENTITY(1,1),
	MAKHUYENMAI NVARCHAR(20) UNIQUE,
	TEN NVARCHAR(255),
	MUCGIAMGIA INT,
	NGAYBATDAU DATETIME,
	NGAYKETTHUC DATETIME,
	TRANGTHAI INT,
	PRIMARY KEY(ID)
)
GO


CREATE TABLE KHACHHANG(
	ID INT IDENTITY(1,1),
	MAKHACHHANG NVARCHAR(20) UNIQUE,
	CCCD NVARCHAR(20) UNIQUE,
	TEN NVARCHAR(255),
	SDT NVARCHAR(10),
	CAPBAC INT,
	DIACHI NVARCHAR(255),
	PRIMARY KEY(ID)
)
GO 
CREATE TABLE HOADON(
	ID INT IDENTITY(1,1),
	MAHOADON NVARCHAR(20) UNIQUE,
	IDNHANVIEN INT,
	IDKHACHHANG INT,
	SDT NVARCHAR(10) DEFAULT N'Không có',
	DIACHI NVARCHAR(255),
	HINHTHUCGIAOHANG INT DEFAULT 0,
	HINHTHUCTHANHTOAN INT DEFAULT 0,
	LYDO NVARCHAR(255) DEFAULT N'Không có',
	NGAYSHIP DATE,
	NGAYTHANHTOAN DATE,
	TIENKHACHTRA INT DEFAULT 0,
	TIENKHACHCHUYENKHOAN INT DEFAULT 0,
	NGAYTAO DATE,
	TRANGTHAI INT DEFAULT 0,
	TONGTIEN INT DEFAULT 0,
	IDKHUYENMAI INT DEFAULT 1,
	TIENSAUGIAMGIA INT DEFAULT 0,
	PRIMARY KEY(ID),
	FOREIGN KEY(IDNHANVIEN) REFERENCES NHANVIEN(ID),
	FOREIGN KEY(IDKHUYENMAI) REFERENCES KHUYENMAI(ID),
	FOREIGN KEY(IDKHACHHANG) REFERENCES KHACHHANG(ID)
)
GO

CREATE TABLE HOADONCHITIET(
	ID INT IDENTITY(1,1),
	IDHOADON INT,
	IDCTSP INT,
	TENSP NVARCHAR(255),
	TENNSX NVARCHAR(255),
	DONGSP NVARCHAR(255),
	MAUSAC NVARCHAR(255),
	ANH NVARCHAR(255),
	SIZE NVARCHAR(255),
	SOLUONG INT,
	DONGIA INT,
	TRANGTHAI INT DEFAULT 0,
	PRIMARY KEY(ID),
	FOREIGN KEY(IDHOADON) REFERENCES HOADON(ID),
	FOREIGN KEY(IDCTSP) REFERENCES CHITIETSP(ID)
)
GO

INSERT INTO SANPHAM VALUES(N'Áo cụt cánh')
INSERT INTO SANPHAM VALUES(N'Quần đùi')
INSERT INTO SANPHAM VALUES(N'Áo sơ mi')

INSERT INTO NSX VALUES('NSX1')
INSERT INTO NSX VALUES('NSX2')
INSERT INTO NSX VALUES('NSX3')

INSERT INTO SIZE VALUES('S')
INSERT INTO SIZE VALUES('L')
INSERT INTO SIZE VALUES('XL')
INSERT INTO SIZE VALUES('XXL')

INSERT INTO MAUSAC VALUES(N'Xanh')
INSERT INTO MAUSAC VALUES(N'Đỏ')
INSERT INTO MAUSAC VALUES(N'Vàng')

INSERT INTO DONGSP VALUES(N'Áo')
INSERT INTO DONGSP VALUES(N'Quần')

INSERT INTO CHATLIEU VALUES(N'Vải')
INSERT INTO CHATLIEU VALUES(N'Lụa')
INSERT INTO CHATLIEU VALUES(N'Ni lông')

INSERT INTO CHUCVU VALUES(N'Quản lý')
INSERT INTO CHUCVU VALUES(N'Nhân viên')

INSERT INTO NHANVIEN VALUES(N'NVI1','034203009023',N'Ngô Hoàng Long',1,1,'2003-01-11','0123456789',N'Thái Bình','longnhph27503@fpt.edu.vn',123,1)
INSERT INTO NHANVIEN VALUES(N'NVI2','000000000000',N'Đoàn Đức Thiến',2,0,'2003-09-02','0987654321',N'Thái Bình','thien@fpt.edu.vn',123,1)


INSERT INTO KHUYENMAI VALUES(N'SALE_12_12',N'Giảm giá ngày 12-12',5,'2022-12-12','2022-12-13',1)
INSERT INTO KHUYENMAI VALUES(N'SALE_20_12',N'Giảm giá ngày 20-12',5,'2022-12-20','2022-12-21',1)
INSERT INTO KHUYENMAI VALUES(N'SALE_25_12',N'Giảm giá ngày 25-12',5,'2022-12-25','2022-12-27',1)

INSERT INTO KHACHHANG VALUES('KH1','0123456789123',N'Lỗ Chí Thâm','0123456789',0,N'Lương Sơn Bạc')
INSERT INTO KHACHHANG VALUES('KH2','1123456789123',N'Võ Tòng','0987654321',1,N'Lương Sơn Bạc')
INSERT INTO KHACHHANG VALUES('KH3','2123456789123',N'Tống Giang','0387654321',2,N'Lương Sơn Bạc')

INSERT INTO CHITIETSP VALUES('SP1',1,1,1,1,1,1,'img1.png',354,67000,'165875',N'Không có') 
INSERT INTO CHITIETSP VALUES('SP2',2,2,2,2,2,2,'img1.png',354,67000,'165875',N'Không có')
INSERT INTO CHITIETSP VALUES('SP3',2,2,2,2,2,2,'img1.png',354,67000,'165875',N'Không có')

INSERT INTO HOADON VALUES('HD154853',1,1,'0684569874',N'89 Lê Đức Thọ-Mỹ Đình',0,0,null,null,'2022-05-12',500000,0,'2022-05-12',1,500000,1,450000) 
INSERT INTO HOADON VALUES('HD544677',2,2,'0947658544',N'14 Trần Bình-Cầu Giấy',0,0,null,null,'2022-05-12',300000,0,'2022-05-12',2,300000,1,290000)
INSERT INTO HOADON VALUES('HD734563',2,1,'0947658544',N'17 Trần Bình-Cầu Giấy',1,2,null,'2022-05-12','2022-05-12',0,300000,'2022-05-12',2,300000,1,290000)

INSERT INTO HOADONCHITIET VALUES(2,1,'TESTTENSP0','TESTTENNSX0','TESTDONGSP0','TESTMAUSAC0','TESTANH0','TESTSIZE0',6,99999,1) 
INSERT INTO HOADONCHITIET VALUES(3,2,'TESTTENSP1','TESTTENNSX1','TESTDONGSP1','TESTMAUSAC1','TESTANH1','TESTSIZE1',8,88888,1) 
INSERT INTO HOADONCHITIET VALUES(1,1,'TESTTENSP2','TESTTENNSX2','TESTDONGSP2','TESTMAUSAC2','TESTANH2','TESTSIZE2',2,55555,1) 
















--CREATE TABLE CALAM(
	
--)



--USE MASTER
--GO
--DROP DATABASE QUANLYBANQUANAO
